---
title: Generic Stream Concurrency 
description: This document describes how to limit stream concurrency to end-viewers with a heartbeat mechanism and without DRM.
parent: Guides
grandparent: Playback Restrictions
layout: staging
---

<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
    <p>Generic Stream Concurrency lets you define the number of video streams that a specific user can watch concurrently. Limiting stream concurrency helps you prevent content being stolen or illegally watched through the theft or inappropriate sharing of credentials.</p>
    <p>This feature is part of Playback Restrictions, and it’s an alternative to <a href="/playback-restrictions/guides/stream-concurrency.html">stream concurrency with DRM</a>, which is an alternative solution.</p>
  </section>
  <section class="bcls-section">
    <h2 id="how_it_works">How it works</h2>
    <h3>Heartbeat</h3>
    <p>The heartbeat is a mechanism that requests on a frequency base the active sessions for a specific user, to enforce that it is a valid session through the entire playback. The heartbeat can be enabled for the Brightcove web player and the native SDK players.</p>
    <p>The frequency of the heartbeat defines how often the player makes mid-stream checks to see if the conditions for playback are still met. By default the frequency is set to 1 minute, but this can be changed.</p>
    <h3>Blocking streams</h3>
    <p>When the maximum number of concurrent streams is reached and the viewer, or someone with their account credentials, tries to open an additional stream, any new stream from that user identified as a different streaming location will be blocked.</p>
  </section>
  <section class="bcls-section">
    <h2 id="correlator_identifier">Correlator identifier</h2>
    <p>A <a href="#correlator_identifier">correlator identifier</a> is used to define viewer streaming locations. The characteristics of this identifier are:</p>
    <ul>
      <li>It should be specific enough to correlate all requests from the same Viewer. If the correlator is too generic it will bucket multiple viewers with the same viewer ID together and group them all into the same slot.</li>
      <li>It should be consistent across all video views for the same Viewer.</li>
    </ul>
    <p>When the "correlator" is different, it will try to fill a "slot" for the viewer id, which means if that value changes during the same viewing, it will be treated as if it were a different viewer and prevent playback.</p>
    <p>The correlator is set in the JWT using the <code translate="No">uid</code> claim</p>
  </section>
  <section class="bcls-section">
    <h2 id="Implementation">Implementation</h2>
    <h3>Using Brightcove web or SDK players</h3>
    <ol class="bcls-tasklist-restart">
      <li>If you wish to change the heartbeat frequency from the default (1 minute) <a href="https://supportportal.brightcove.com/">contact Support</a>.</li>
      <li>
        <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Create a JWT</a> for playback restrictions. (Only the <code translate="No">climit</code>, <code translate="No">sid</code>, and <code translate="No">uid</code> claims are required.)
        <ul>
        <li>You <strong>must</strong> set the concurrency limit (<code translate="No">climit</code>) and viewer identifier (<code translate="No">uid</code>)</li>
        <li>
          You must also include a <a href="#correlator_identifier">correlator identifier</a> (<code translate="No">sid</code>) that defines the streaming locations for a viewer. The correlator identifier is typically a device name, possibly combined with a client app name, such as:
          <ul>
            <li>Chrome MAC (Cadmium) HTML 5</li>
            <li>Apple iPad 7th Gen 10.2 (Wi-Fi)</li>
            <li>Apple Apple TV TBD Apple TV</li>
            <li>Android DefaultWidevineL3Phone Android Phone</li>
            <li>Firefox MAC (Cadmium) HTML 5</li>
            <li>Google Chromecast streaming stick</li>
          </ul>
        </li>
        </ul>
      </li>
      <li>
        Enable Generic Stream Concurrency on client players: see <a href="#implementation_in_players">Implementation in players</a> below
      </li>
    </ol>
    <details>
      <summary>
        Sample <span translate="No">JSON Web Token</span> (JWT) claims
      </summary>
      <pre class="line-numbers"><code class="language-json" translate="No">{
// account id: JWT is only valid for this account
"accid":"4590388311111",
// limit of concurrent users
"climit": 3,
// user id
"uid": "108.26.184.3_1634052241",
// correlator identifier
"sid": "Firefox MAC (Cadmium) HTML 5"
}
}</code></pre>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="Notes">Notes</h2>
    <ul>
      <li>When the maximum number of sessions is exceeded for a viewer, a session will be stopped. It may take as long as the heartbeat frequency for the session to be stopped.</li>
      <li>If the client player cannot to connect to the server, it will re-try three times. If it still cannot connect, playback will continue, but concurrency limits will no longer be enforced.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="implementation_in_players">Implementation in players</h2>
    <h3>Brightcove web player</h3>
    <p>To enable the Generic Stream Concurrency feature for a specific player, modify the player configuration by going to the Players/JSON Editor section in Studio. You will need to add the following key/value pair to specify they want GSC to be activated.</p>
    <pre class="line-numbers"><code class="language-json" translate="No">“stream_concurrency” : true</code></pre>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/playback-restrictions/guides/generic-stream-concurrency/edit-player-config.png" alt="Player Configuration">
      <figcaption class="bcls-caption--image">Player Configuration</figcaption>
    </figure>
    <p>If this key/value pair is not present in JSON or the value is false, GSC feature would not be enabled for the player.</p>
    <h3>iOS</h3>
    <p>To enable the Generic Stream Concurrency feature for iOS SDK, you need to enable the option <code translate="No">streamConcurrencyEnabled</code> in their playbackController. Optionally they can send the value for `sid`, if the sid is empty, this value will not be sent as header.</p>
    <h4>Objective-C</h4>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/playback-restrictions/guides/generic-stream-concurrency/objective-c.png" alt="Objective-C Sample Code">
      <figcaption class="bcls-caption--image">Objective-C Sample Code</figcaption>
    </figure>
    <h4>Swift</h4>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/playback-restrictions/guides/generic-stream-concurrency/swift.png" alt="Swift Sample Code">
      <figcaption class="bcls-caption--image">Swift Sample Code</figcaption>
    </figure>
  </section>
  <section class="bcls-section">
    <h2 id="implementation_via_API">Implementation via API</h2>
    <p>This feature can be implemented via API without using the Brightcove Web Player or SDK players. The authorization method is through a JWT.</p>
    <h4>The API endpoints</h4>
    <dl>
      <dt>Heartbeat</dt>
      <dd>
        This endpoint is used to create new streaming sessions.
      </dd>
      <dt>Active sessions</dt>
      <dd>
        This endpoint allows you to list streaming sessions to keep track of them.
      </dd>
      <dt>Stop sessions</dt>
      <dd>
        This endpoint allows you to to stop a streaming session.
      </dd>
    </dl>
  </section>
</article>